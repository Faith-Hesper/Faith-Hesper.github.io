import{r as e,q as l,s as a,a as t,c as s,w as u,g as d,i as n,o,b as i,u as f,d as r,e as _,F as c,f as m,h as p,j as h,t as v,m as y,k as x}from"./index-BrufAkfy.js";import{_ as k,a as g}from"./counter.NN__vUGj.js";import{_ as b,a as w,r as C}from"./uni-app.es.BDelRtJL.js";const M=b({__name:"index",setup(b){const M=d(),j=e(""),D=e(null);w((()=>{j.value=M.globalData.orders_filt,T()}));const F=e=>{const{filt:l}=e.currentTarget.dataset;l!==j.value&&(j.value=l,T())},T=()=>{M.globalData.utils.request({url:"/order/list",method:"GET",data:{state:j.value},header:{token:l("token")},success:e=>{console.log(e,"success"),D.value=e.data},fail:e=>{a({title:e.msg,icon:"none"})}})},q=e=>{y({url:"../order/order?oid="+e.currentTarget.dataset.id})},z=()=>{T()};return(e,l)=>{const a=n,d=h,y=x,b=C(t("formater"),k),w=C(t("counter"),g);return o(),s(a,null,{default:u((()=>[i(a,{style:{width:"100%","border-bottom":"0 none",position:"fixed","z-index":"2"}},{default:u((()=>[i(a,{style:{background:"#ffffff",position:"relative"}},{default:u((()=>[i(a,{class:"h-tab vp-flex"},{default:u((()=>[i(a,{class:f("h-tab-item vp-flex_1 "+(""==j.value?"on":"")),"data-filt":"",onClick:F},{default:u((()=>[r("全部")])),_:1},8,["class"]),i(a,{class:f("h-tab-item vp-flex_1 "+(1==j.value?"on":"")),"data-filt":"1",onClick:F},{default:u((()=>[r("待支付")])),_:1},8,["class"]),i(a,{class:f("h-tab-item vp-flex_1 "+(2==j.value?"on":"")),"data-filt":"2",onClick:F},{default:u((()=>[r("待服务")])),_:1},8,["class"]),i(a,{class:f("h-tab-item vp-flex_1 "+(3==j.value?"on":"")),"data-filt":"3",onClick:F},{default:u((()=>[r("已完成")])),_:1},8,["class"]),i(a,{class:f("h-tab-item vp-flex_1 "+(4==j.value?"on":"")),"data-filt":"4",onClick:F},{default:u((()=>[r("已取消")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),i(a,{style:{height:"100rpx"}}),null!=D.value?(o(),_(c,{key:0},[null!=D.value&&0==D.value.length?(o(),s(a,{key:0,style:{padding:"40rpx 40rpx 40rpx 40rpx","text-align":"center"}},{default:u((()=>[i(d,{src:"/assets/empty-DpvwZZhY.png",mode:"widthFix",style:{width:"200rpx"}}),i(a,{class:"f5"},{default:u((()=>[r("没有相关内容~")])),_:1})])),_:1})):(o(),s(a,{key:1,class:"od-list"},{default:u((()=>[(o(!0),_(c,null,m(D.value,((e,l)=>(o(),s(a,{key:l,class:"od-item",onClick:q,"data-id":e.out_trade_no},{default:u((()=>[i(a,{class:"weui-cell weui-cell_access"},{default:u((()=>[i(a,{class:"weui-cell__hd"},{default:u((()=>[i(a,null,{default:u((()=>[i(d,{src:e.service_logo_image_url,mode:"widthFix",class:"od-logo",style:{width:"100rpx",height:"100rpx","margin-right":"20rpx"}},null,8,["src"])])),_:2},1024)])),_:2},1024),i(a,{class:"weui-cell__bd"},{default:u((()=>[i(a,null,{default:u((()=>[i(y,{style:{"font-weight":"bold"}},{default:u((()=>[r(v(e.service_name),1)])),_:2},1024)])),_:2},1024),i(a,{class:"od-info"},{default:u((()=>[e.service_stype<=20?(o(),_(c,{key:0},[i(a,null,{default:u((()=>[i(y,null,{default:u((()=>[r(v(e.hospital_name)+"（"+v(e.area_name)+"）",1)])),_:2},1024)])),_:2},1024),i(a,null,{default:u((()=>[r(" 预约时间： "),i(b,{timestamp:e.starttime,format:"MM-dd hh:mm"},null,8,["timestamp"])])),_:2},1024),i(a,null,{default:u((()=>[r(" 就诊人员： "),i(y,null,{default:u((()=>[r(v(e.client_name),1)])),_:2},1024)])),_:2},1024)],64)):p("",!0),e.service_stype>20&&e.service_stype<100?(o(),_(c,{key:1},[i(a,null,{default:u((()=>[i(y,null,{default:u((()=>[r(v(e.hospital_name)+"（"+v(e.area_name)+"）",1)])),_:2},1024)])),_:2},1024),i(a,null,{default:u((()=>[r(" 处理时间： "),i(b,{timestamp:e.starttime,format:"MM-dd hh:mm"},null,8,["timestamp"])])),_:2},1024)],64)):p("",!0),e.service_stype>100?(o(),_(c,{key:2},[i(a,null,{default:u((()=>[r(" 服务时间： "),i(b,{timestamp:e.starttime,format:"MM-dd hh:mm"},null,8,["timestamp"])])),_:2},1024),i(a,null,{default:u((()=>[r(" 服务对象： "),i(y,null,{default:u((()=>[r(v(e.client_name),1)])),_:2},1024)])),_:2},1024)],64)):p("",!0)])),_:2},1024)])),_:2},1024),i(a,{class:"weui-cell__ft"},{default:u((()=>["待支付"==e.trade_state?(o(),_(c,{key:0},[i(a,{style:{color:"#ffa200"}},{default:u((()=>[i(y,null,{default:u((()=>[r("待支付")])),_:1})])),_:1}),i(a,{style:{color:"#ffa200"}},{default:u((()=>[i(w,{style:{"font-size":"24rpx"},second:e._exp_time,onCounterOver:z},null,8,["second"])])),_:2},1024)],64)):p("",!0),"待服务"==e.trade_state?(o(),s(a,{key:1,style:{color:"#1da6fd"}},{default:u((()=>[i(y,null,{default:u((()=>[r("待服务")])),_:1})])),_:1})):p("",!0),"已完成"==e.trade_state?(o(),s(a,{key:2,style:{color:"#21c521"}},{default:u((()=>[i(y,null,{default:u((()=>[r("已完成")])),_:1})])),_:1})):p("",!0),"已取消"==e.trade_state?(o(),s(a,{key:3,style:{color:"#999999"}},{default:u((()=>[i(y,null,{default:u((()=>[r("已取消")])),_:1})])),_:1})):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["data-id"])))),128))])),_:1}))],64)):p("",!0)])),_:1})}}},[["__scopeId","data-v-a5f51547"]]);export{M as default};
