import{_ as E}from"./zdjh-bc3a60d2.js";import{_ as L}from"./fb-65ca9f77.js";import{_ as P,f as u,s as B,r as s,o as x,v as T,w as n,a,t as j,b as t,x as A,u as G,J as $,c as R,F as q,i as H,d as M,C as K}from"./index-79e36b83.js";import{g as Q,l as W,m as X,n as Y}from"./patrolGuard-413be18c.js";import{D as Z}from"./DialogView-54d1109d.js";import"./axios-c0524c3b.js";import"./index-b0dc9d9c.js";const ee={class:"title"},te={__name:"DetailModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},data:{default:{name:"",date:""}},onSubmit:{default:()=>{}}},emits:["update:visible"],setup(V,{emit:D}){const r=V,C=D,w=u(),_=B(()=>r.visible),d=B(()=>r.data);function c(){C("update:visible",!1)}function m(){w.value.validate(p=>{if(p)r.onSubmit(A(d));else return console.log("error submit!!"),!1})}return(p,i)=>{const f=s("el-input"),v=s("el-form-item"),b=s("el-form"),k=s("el-dialog");return x(),T(k,{modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=g=>_.value=g),"before-close":c,class:"custom-dialog","append-to-body":!0,width:"30%"},{header:n(()=>[a("div",ee,j(V.title),1)]),footer:n(()=>[a("div",{class:"dialog-footer flex content-center"},[a("div",{class:"reset-btn",onClick:c},"取 消"),a("div",{class:"search-btn",type:"primary",onClick:m},"确 定")])]),default:n(()=>[t(b,{model:d.value,"label-width":"auto","label-position":"left",ref_key:"formRef",ref:w,class:"custom-form"},{default:n(()=>[t(v,{label:"巡检点名称",prop:"name",required:""},{default:n(()=>[t(f,{class:"custom-input",modelValue:d.value.name,"onUpdate:modelValue":i[0]||(i[0]=g=>d.value.name=g)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ae=P(te,[["__scopeId","data-v-c3c769bd"]]);const oe={class:"control"},le={class:"table-cell"},ne={class:"upload"},se={key:0,src:L,alt:"",srcset:""},ie={__name:"index",setup(V){G();const D=u(),r=u("upload"),C=[{prop:"name",label:"巡检点名称"}],w=[{date:"2024-03-09",name:"闸机",times:"4",zq:"1周"},{date:"2024-03-09",name:"闸机",times:"4",zq:"1周"},{date:"2024-03-09",name:"闸机",times:"4",zq:"1周"},{date:"2024-03-09",name:"闸机",times:"4",zq:"1周"}],_=u(),d=u(w),c=u(!1),m=u(!1),p=u({}),i=$({name:"",member:""}),f=$({total:20,pageNum:1,pageSize:10});function v(o,e){switch(r.value=e,p.value=JSON.parse(JSON.stringify(o)),e){case"upload":m.value=!0;break;case"delete":m.value=!0;break;default:c.value=!0}}async function b(){try{const{code:o,data:e}=await Q({current:f.pageNum,name:i.name,size:f.pageSize});o===1&&(f.total=e.total,d.value=e)}catch(o){console.error("获取数据失败",o)}}async function k(o,e){const h={create:W,edit:X,delete:Y};try{const y=h[o],{code:S}=await y(e);return S===1?(await b(),!0):!1}catch(y){return console.error(`${o}操作失败`,y),!1}}function g(o){const e=r.value==="create"?"create":"edit";k(e,o),c.value=!1}function F(){const o=p.value,e=r.value==="upload"?"upload":"delete";k(e,o),m.value=!1}function O(){f.pageNum=1,b()}function J(){_.value.resetFields()}return b(),(o,e)=>{const h=s("el-input"),y=s("el-form-item"),S=s("el-form"),N=s("el-table-column"),U=s("el-button"),I=s("el-table");return x(),R(q,null,[a("div",oe,[t(S,{inline:!0,model:i,"label-width":"auto","label-position":"left",ref_key:"formRef",ref:_,class:"custom-form"},{default:n(()=>[t(y,{label:"巡检点名称",prop:"name"},{default:n(()=>[t(h,{class:"custom-input",modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=l=>i.name=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a("div",{class:"searchBar-btns"},[a("div",{class:"reset-btn",onClick:J},"重置"),a("div",{class:"search-btn",onClick:O},"查询")]),a("div",{class:"plan",onClick:e[1]||(e[1]=l=>v({},"create"))},e[4]||(e[4]=[a("img",{src:E,alt:""},null,-1),a("span",{class:"text"},"新增",-1)]))]),t(I,{ref_key:"tableRef",ref:D,data:d.value,class:"custom-table deep","highlight-current-row":""},{default:n(()=>[t(N,{type:"index",label:"序号",align:"center",width:"70"}),(x(),R(q,null,H(C,(l,z)=>t(N,{key:z,prop:l.prop,label:l.label,width:l.width,align:"center","show-overflow-tooltip":""},null,8,["prop","label","width"])),64)),t(N,{label:"操作",align:"center",width:"200px"},{default:n(l=>[a("div",le,[t(U,{type:"primary",text:"primary",onClick:z=>v(l.row,"edit"),link:""},{default:n(()=>e[5]||(e[5]=[M("编辑")])),_:2},1032,["onClick"]),t(U,{type:"danger",text:"danger",onClick:z=>v(l.row,"delete"),link:""},{default:n(()=>e[6]||(e[6]=[M("删除")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),t(ae,{visible:c.value,title:"新建巡检点",data:p.value,onSubmit:g,"onUpdate:visible":e[2]||(e[2]=l=>c.value=l)},null,8,["visible","data"]),t(Z,{visible:m.value,title:"删除",onSubmit:F,"onUpdate:visible":e[3]||(e[3]=l=>m.value=l)},{default:n(()=>[a("div",ne,[r.value==="upload"?(x(),R("img",se)):K("",!0),e[7]||(e[7]=a("span",null,"请确认，是否删除此点位",-1))])]),_:1},8,["visible"])],64)}}},_e=P(ie,[["__scopeId","data-v-945b76ff"]]);export{_e as default};
