import{_ as Y}from"./zdjh-bc3a60d2.js";import{g as E,r as L,s as P,t as A}from"./securityManagementAPI-1e058741.js";import{_ as F,f as m,s as N,r as i,o as k,v as G,w as s,a as r,t as H,b as e,x as K,J as M,c as B,F as Q,i as T}from"./index-267246aa.js";import"./axios-da025460.js";import"./index-1899286b.js";const W={class:"title"},X={__name:"DetailModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},data:{default:{name:"",job:"",sex:"",phone:""}},onSubmit:{default:()=>{}}},emits:["update:visible"],setup(D,{emit:g}){const v=D,h=g,V=m(),x=N(()=>v.visible),a=N(()=>v.data);function c(){h("update:visible",!1)}function S(){V.value.validate(f=>{if(f)v.onSubmit(K(a));else return console.log("error submit!!"),!1})}return(f,l)=>{const u=i("el-input"),n=i("el-form-item"),y=i("el-option"),_=i("el-select"),w=i("el-form"),C=i("el-dialog");return k(),G(C,{modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=p=>x.value=p),"before-close":c,class:"custom-dialog","append-to-body":!0,width:"30%"},{header:s(()=>[r("div",W,H(D.title),1)]),footer:s(()=>[r("div",{class:"dialog-footer flex content-center"},[r("div",{class:"reset-btn",onClick:c},"取 消"),r("div",{class:"search-btn",type:"primary",onClick:S},"确 定")])]),default:s(()=>[e(w,{model:a.value,"label-width":"auto","label-position":"left",ref_key:"formRef",ref:V,class:"custom-form"},{default:s(()=>[e(n,{label:"姓名",prop:"name",required:""},{default:s(()=>[e(u,{class:"custom-input",modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=p=>a.value.name=p)},null,8,["modelValue"])]),_:1}),e(n,{label:"职务",prop:"job",required:""},{default:s(()=>[e(u,{class:"custom-input",modelValue:a.value.job,"onUpdate:modelValue":l[1]||(l[1]=p=>a.value.job=p)},null,8,["modelValue"])]),_:1}),e(n,{label:"性别",prop:"sex",required:""},{default:s(()=>[e(_,{class:"custom-input",modelValue:a.value.sex,"onUpdate:modelValue":l[2]||(l[2]=p=>a.value.sex=p)},{default:s(()=>[e(y,{label:"男",value:"男"}),e(y,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"联系电话",prop:"phone",required:""},{default:s(()=>[e(u,{class:"custom-input",modelValue:a.value.phone,"onUpdate:modelValue":l[3]||(l[3]=p=>a.value.phone=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Z=F(X,[["__scopeId","data-v-4d01a28f"]]);const ee={class:"control"},te={class:"table"},oe={class:"table-page"},ae={__name:"index",setup(D){const g=new Date().getFullYear().toString(),v=new Date().getMonth()-1,h=m("create"),V=[{prop:"name",label:"姓名"},{prop:"job",label:"职务"},{prop:"sex",label:"性别"},{prop:"phone",label:"联系电话"}],x=[{name:"白海龙",job:"工程师",sex:"男",phone:"18888888888"},{name:"白海龙",job:"工程师",sex:"男",phone:"18888888888"},{name:"白海龙",job:"工程师",sex:"男",phone:"18888888888"}],a=m(),c=m(!1),S=m(!1),f=m({}),l=m(x),u=M({year:g||"2024",month:g+"-"+v,name:"",job:""}),n=M({total:20,pageNum:1,pageSize:10});function y(t){f.value=JSON.parse(JSON.stringify(t)),c.value=!0}async function _(){try{const{code:t,data:o}=await E({current:n.pageNum,name:u.name,job:u.job,size:n.pageSize});t===1&&(n.total=o.total,l.value=o.records)}catch(t){console.error("获取数据失败",t)}}async function w(t,o){const j={create:L,edit:P,delete:A};try{const b=j[t],{code:U}=await b(o);return U===1?(await _(),!0):!1}catch(b){return console.error(`${t}操作失败`,b),!1}}function C(t){const o=h.value==="create"?"create":"edit";w(o,t),c.value=!1}function p(){const t=f.value,o=h.value==="upload"?"upload":"delete";w(o,t),S.value=!1}function q(t){n.pageSize=t,_()}function O(t){n.pageNum=t,_()}_();function R(){a.value.resetFields()}return(t,o)=>{const j=i("el-input"),b=i("el-form-item"),U=i("el-form"),z=i("el-table-column"),J=i("el-table"),$=i("el-pagination");return k(),B("div",null,[r("div",ee,[e(U,{inline:!0,model:u,"label-width":"auto","label-position":"left",ref_key:"formRef",ref:a,class:"custom-form"},{default:s(()=>[e(b,{label:"姓名",prop:"name"},{default:s(()=>[e(j,{class:"custom-input",modelValue:u.name,"onUpdate:modelValue":o[0]||(o[0]=d=>u.name=d)},null,8,["modelValue"])]),_:1}),e(b,{label:"职务",prop:"job"},{default:s(()=>[e(j,{class:"custom-input",modelValue:u.job,"onUpdate:modelValue":o[1]||(o[1]=d=>u.job=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),r("div",{class:"searchBar-btns"},[r("div",{class:"reset-btn",onClick:R},"重置"),r("div",{class:"search-btn",onClick:p},"查询")]),r("div",{class:"plan",onClick:y},o[3]||(o[3]=[r("img",{src:Y,alt:""},null,-1),r("span",{class:"text"},"新建",-1)]))]),r("div",te,[e(J,{data:l.value,class:"custom-table deep","highlight-current-row":""},{default:s(()=>[e(z,{type:"index",label:"序号",align:"center",width:"70"}),(k(),B(Q,null,T(V,(d,I)=>e(z,{key:I,prop:d.prop,label:d.label,width:d.width,align:"center","show-overflow-tooltip":""},null,8,["prop","label","width"])),64))]),_:1},8,["data"]),r("div",oe,[e($,{class:"custom-pagination",onSizeChange:q,onCurrentChange:O,"current-page":n.pageNum,"page-size":n.pageSize,layout:"total, prev, pager, next, jumper",total:n.total,background:""},null,8,["current-page","page-size","total"])])]),e(Z,{visible:c.value,title:"人员管理",data:f.value,onSubmit:C,"onUpdate:visible":o[2]||(o[2]=d=>c.value=d)},null,8,["visible","data"])])}}},ue=F(ae,[["__scopeId","data-v-d64856a8"]]);export{ue as default};
