import{b as B}from"./systemAPI-88b64bb8.js";import{m as I}from"./engineeringAPI-b1b8a18c.js";import{b as O,d as q}from"./unit-ac192840.js";import{_ as F,f as b,J,r as s,o as p,c as v,a as _,D as P,b as e,w as l,F as y,i as x,v as D,x as j,C as z}from"./index-267246aa.js";const E={class:"sheet sheet-box"},L={class:"main"},A={class:"form dynamotor-form eletric-form form-level-1"},G={class:"form-group border-none"},H={key:0,class:"footer"},K={__name:"SheetView",props:{data:Object},emits:["subCall"],setup(R,{emit:C}){const m=JSON.parse(O("maintenanceData")),Y=R,h=b(Y.data.query),n=b(h.value.type!=1||m&&m.step==="维修验收"),g=C,t=b({checkContent:"",endTime:"",inspectionDate:"",inspectionRecord:"",inspectionUser:m?m.reportId:"",name:"",planType:"维修",problem:"",problemRecord:"",processResult:"",repairDate:"",repairRecord:"",repairer:m?m.repairerId:"",startDate:"",unit:""}),M=J([{label:"维修",value:"维修"},{label:"养护",value:"养护"},{label:"计划内",value:"计划内"},{label:"计划外",value:"计划外"}]),f=b([]),w=()=>{g("subCall",q(t.value))};return B().then(c=>{f.value=c.data.records}),m&&n.value&&I({repairid:m.id}).then(c=>{const o=c.data[c.data.length-1];t.value=o}),(c,o)=>{const i=s("el-input"),u=s("el-form-item"),d=s("el-col"),r=s("el-row"),N=s("el-radio"),S=s("el-radio-group"),V=s("el-date-picker"),U=s("el-option"),k=s("el-select"),T=s("el-form");return p(),v("div",E,[_("div",{class:"title",style:P(Y.data.titleStyle)},"维修养护记录表",4),_("div",L,[_("div",A,[e(T,{model:t.value,disabled:n.value,class:"sheet-form"},{default:l(()=>[e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"工程名称"},{default:l(()=>[e(i,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value.name=a),placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"维修计划"},{default:l(()=>[_("div",G,[e(S,{modelValue:t.value.planType,"onUpdate:modelValue":o[1]||(o[1]=a=>t.value.planType=a),disabled:""},{default:l(()=>[(p(!0),v(y,null,x(M,a=>(p(),D(N,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"维修日期",class:"start-end-date"},{default:l(()=>[e(V,{modelValue:t.value.startDate,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value.startDate=a),type:"date","value-format":"YYYY-MM-DD",placeholder:n.value?"":"选择开始时间"},null,8,["modelValue","placeholder"]),e(V,{modelValue:t.value.endTime,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.endTime=a),type:"date","value-format":"YYYY-MM-DD",placeholder:n.value?"":"选择结束时间"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"实施单位"},{default:l(()=>[e(i,{modelValue:t.value.unit,"onUpdate:modelValue":o[4]||(o[4]=a=>t.value.unit=a),placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"维修人员"},{default:l(()=>[e(k,{modelValue:t.value.repairer,"onUpdate:modelValue":o[5]||(o[5]=a=>t.value.repairer=a),disabled:"",class:"com-select"},{default:l(()=>[(p(!0),v(y,null,x(f.value,a=>(p(),D(U,{key:a.id,label:a.nickName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"故障情况记录",class:"textarea"},{default:l(()=>[e(i,{modelValue:t.value.problemRecord,"onUpdate:modelValue":o[6]||(o[6]=a=>t.value.problemRecord=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"检修维护内容",class:"textarea"},{default:l(()=>[e(i,{modelValue:t.value.checkContent,"onUpdate:modelValue":o[7]||(o[7]=a=>t.value.checkContent=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"维修情况记录",class:"textarea-box"},{default:l(()=>[e(i,{modelValue:t.value.repairRecord,"onUpdate:modelValue":o[8]||(o[8]=a=>t.value.repairRecord=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"]),e(r,{class:"textarea-inner"},{default:l(()=>[e(d,{span:12},{default:l(()=>[e(u,{label:"维修人："},{default:l(()=>[e(k,{modelValue:t.value.repairer,"onUpdate:modelValue":o[9]||(o[9]=a=>t.value.repairer=a),disabled:"",class:"com-select"},{default:l(()=>[(p(!0),v(y,null,x(f.value,a=>(p(),D(U,{key:a.id,label:a.nickName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(u,{label:"日期："},{default:l(()=>[e(V,{modelValue:t.value.repairDate,"onUpdate:modelValue":o[10]||(o[10]=a=>t.value.repairDate=a),type:"date","value-format":"YYYY-MM-DD",placeholder:n.value?"":"选择日期"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"存在问题",class:"textarea"},{default:l(()=>[e(i,{modelValue:t.value.problem,"onUpdate:modelValue":o[11]||(o[11]=a=>t.value.problem=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"处理结果",class:"textarea"},{default:l(()=>[e(i,{modelValue:t.value.processResult,"onUpdate:modelValue":o[12]||(o[12]=a=>t.value.processResult=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{span:24},{default:l(()=>[e(u,{label:"维修验收记录",class:"textarea-box"},{default:l(()=>[e(i,{modelValue:t.value.inspectionRecord,"onUpdate:modelValue":o[13]||(o[13]=a=>t.value.inspectionRecord=a),type:"textarea",placeholder:n.value?"":"请输入"},null,8,["modelValue","placeholder"]),e(r,{class:"textarea-inner"},{default:l(()=>[e(d,{span:12},{default:l(()=>[e(u,{label:"验收人："},{default:l(()=>[e(k,{modelValue:t.value.inspectionUser,"onUpdate:modelValue":o[14]||(o[14]=a=>t.value.inspectionUser=a),class:"com-select"},{default:l(()=>[(p(!0),v(y,null,x(f.value,a=>(p(),D(U,{key:a.id,label:a.nickName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(u,{label:"日期："},{default:l(()=>[e(V,{modelValue:t.value.inspectionDate,"onUpdate:modelValue":o[15]||(o[15]=a=>t.value.inspectionDate=a),type:"date","value-format":"YYYY-MM-DD",placeholder:n.value?"":"选择日期"},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])])]),h.value.type==1&&j(m).step!=="维修验收"?(p(),v("div",H,[_("div",{class:"search-btn",onClick:w},"提交")])):z("",!0)])}}},$=F(K,[["__scopeId","data-v-021241a3"]]);export{$ as S};
