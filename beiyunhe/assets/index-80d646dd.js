import{s as P}from"./engineeringAPI-b1b8a18c.js";import{g as j,a as x}from"./systemAPI-88b64bb8.js";import{b as E}from"./unit-ac192840.js";import{_ as F,u as M,f as v,J as R,g as S,r as c,o as d,c as f,b as t,w as o,x as u,a as Y,C as z,v as r,F as y,i as T,A}from"./index-267246aa.js";import"./axios-da025460.js";const I={class:"detail-index"},J={key:0,class:"footer"},G={__name:"index",setup(H){const C=M().currentRoute.value.query,s=v(C.type==="1"),k=window.config;console.log(s.value);let l=v({id:0,assetNumber:"",name:"",assetType:"",deviceType:"",buildDate:"",constructionPoint:"",brand:"",status:"",inCharge:""});const N=R({assetNumber:[{required:!0,message:"请输入资产编号",trigger:"blur"}],name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],relate_stcd:[{required:!0,message:"请选择资产应用",trigger:"change"}],assetType:[{required:!0,message:"请选择资产类型",trigger:"change"}],deviceType:[{required:!0,message:"请选择设备设施类型",trigger:"change"}],buildDate:[{type:"date",required:!0,message:"请选择建设时间",trigger:"change"}],constructionPoint:[{required:!0,message:"请输入安装位置",trigger:"blur"}],brand:[{required:!0,message:"请输入设备品牌",trigger:"blur"}],status:[{required:!0,message:"请选择设备设施状态",trigger:"change"}],inCharge:[{required:!0,message:"请输入负责人",trigger:"blur"}]}),D=v(null),b=v([]),h=v([]),U=v([]),q=v([]),O=m=>{h.value=b.value.filter(a=>a.dictValue===m)[0].children,l.value.deviceType=""},Z=()=>{D.value.validate(m=>{m&&P(l.value).then(a=>{A({message:a.msg,type:"success"})})})},w=()=>{j(k.dictObject.AssetType).then(m=>{b.value=m.data,h.value=b.value.filter(a=>a.dictValue===l.value.assetType)[0].children}),x(k.dictObject.DeviceStatus).then(m=>{U.value=m.data}),x(k.dictObject.DictZhaDescinfo).then(m=>{q.value=m.data})};return S(()=>{l.value=JSON.parse(E("equipmentObject")),l.value.status=""+l.value.status,s.value&&w()}),(m,a)=>{const n=c("el-input"),p=c("el-form-item"),i=c("el-col"),_=c("el-option"),g=c("el-select"),V=c("el-row"),B=c("el-date-picker"),L=c("el-form");return d(),f("div",I,[t(L,{ref_key:"ruleFormRef",ref:D,model:u(l),rules:N,disabled:!s.value,"label-width":"140px","label-position":"right"},{default:o(()=>[t(V,null,{default:o(()=>[t(i,{span:8},{default:o(()=>[t(p,{label:"资产编号：",prop:"assetNumber"},{default:o(()=>[t(n,{modelValue:u(l).assetNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>u(l).assetNumber=e),placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"设备名称：",prop:"name"},{default:o(()=>[t(n,{modelValue:u(l).name,"onUpdate:modelValue":a[1]||(a[1]=e=>u(l).name=e),placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"资产应用：",prop:"relate_stcd"},{default:o(()=>[s.value?(d(),r(g,{key:0,modelValue:u(l).relate_stcd,"onUpdate:modelValue":a[2]||(a[2]=e=>u(l).relate_stcd=e),class:"com-select",placeholder:"请选择"},{default:o(()=>[(d(!0),f(y,null,T(q.value,e=>(d(),r(_,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(d(),r(n,{key:1,modelValue:u(l).relateStcdZh,"onUpdate:modelValue":a[3]||(a[3]=e=>u(l).relateStcdZh=e)},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(i,{span:8},{default:o(()=>[t(p,{label:"资产类型：",prop:"assetType"},{default:o(()=>[s.value?(d(),r(g,{key:0,modelValue:u(l).assetType,"onUpdate:modelValue":a[4]||(a[4]=e=>u(l).assetType=e),class:"com-select",onChange:O,placeholder:"请选择"},{default:o(()=>[(d(!0),f(y,null,T(b.value,e=>(d(),r(_,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(d(),r(n,{key:1,modelValue:u(l).assetTypeZh,"onUpdate:modelValue":a[5]||(a[5]=e=>u(l).assetTypeZh=e)},null,8,["modelValue"]))]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"设备设施类型：",prop:"deviceType"},{default:o(()=>[s.value?(d(),r(g,{key:0,modelValue:u(l).deviceType,"onUpdate:modelValue":a[6]||(a[6]=e=>u(l).deviceType=e),class:"com-select",placeholder:"请选择"},{default:o(()=>[(d(!0),f(y,null,T(h.value,e=>(d(),r(_,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(d(),r(n,{key:1,modelValue:u(l).deviceTypeZh,"onUpdate:modelValue":a[7]||(a[7]=e=>u(l).deviceTypeZh=e)},null,8,["modelValue"]))]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"建设时间：",prop:"buildDate"},{default:o(()=>[s.value?(d(),r(B,{key:0,modelValue:u(l).buildDate,"onUpdate:modelValue":a[8]||(a[8]=e=>u(l).buildDate=e),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])):(d(),r(n,{key:1,modelValue:u(l).buildDate,"onUpdate:modelValue":a[9]||(a[9]=e=>u(l).buildDate=e)},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(i,{span:8},{default:o(()=>[t(p,{label:"安装位置：",prop:"constructionPoint"},{default:o(()=>[t(n,{modelValue:u(l).constructionPoint,"onUpdate:modelValue":a[10]||(a[10]=e=>u(l).constructionPoint=e),placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"设备品牌：",prop:"brand"},{default:o(()=>[t(n,{modelValue:u(l).brand,"onUpdate:modelValue":a[11]||(a[11]=e=>u(l).brand=e),placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:8},{default:o(()=>[t(p,{label:"设备设施状态：",prop:"status"},{default:o(()=>[s.value?(d(),r(g,{key:0,modelValue:u(l).status,"onUpdate:modelValue":a[12]||(a[12]=e=>u(l).status=e),class:"com-select",placeholder:"请选择"},{default:o(()=>[(d(!0),f(y,null,T(U.value,e=>(d(),r(_,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(d(),r(n,{key:1,modelValue:u(l).statusZh,"onUpdate:modelValue":a[13]||(a[13]=e=>u(l).statusZh=e)},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(i,{span:8},{default:o(()=>[t(p,{label:"负责人：",prop:"inCharge"},{default:o(()=>[t(n,{modelValue:u(l).inCharge,"onUpdate:modelValue":a[14]||(a[14]=e=>u(l).inCharge=e),placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(i,{span:24},{default:o(()=>[t(p,{label:"描述：",class:"flex-top"},{default:o(()=>[t(n,{modelValue:u(l).memo,"onUpdate:modelValue":a[15]||(a[15]=e=>u(l).memo=e),type:"textarea",placeholder:s.value?"请输入":""},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"]),s.value?(d(),f("div",J,[Y("div",{class:"search-btn",onClick:Z},"保存")])):z("",!0)])}}},le=F(G,[["__scopeId","data-v-7ec5078f"]]);export{le as default};
