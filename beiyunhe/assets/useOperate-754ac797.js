import{f as c,J as h,A as z}from"./index-79e36b83.js";const s=()=>{},w={total:20,pageNum:1,pageSize:10},L={name:"",time:"",userName:""},I={get:s,create:s,edit:s,upload:s,delete:s},P="upload",R={get:"获取",create:"新增",edit:"编辑",upload:"发布",delete:"删除"};function C({form:N=L,pageData:v=w,operation:A=P,operationMap:O=I}){const u=c(),i=h({...N}),t=h({...v}),r=c(A),l={...I,...O},p=c([]),d=c({}),f=c(!1),g=c(!1);async function o(){try{const e=l.get,{code:a,data:n}=await e({current:t.pageNum,size:t.pageSize,...i});a===1&&(t.total=n.total,p.value=n.records)}catch(e){console.error("获取数据失败",e)}}async function m(e,a){try{const n=l[e],{code:y}=await n(a);return y===1?(z({message:`成功${R[e]}数据`,type:"success"}),await o(),!0):!1}catch(n){return console.error(`${e}操作失败`,n),!1}}function T(e){const a=r.value==="create"?"create":"edit";m(a,e),f.value=!1}function D(){const e=d.value,a=r.value==="upload"?"upload":"delete";m(a,e),g.value=!1}function E(){t.pageNum=1,o()}function F(e){t.pageSize=e,o()}function M(e){t.pageNum=e,o()}function S(){u.value.resetFields()}return o(),{formRef:u,formData:i,tableData:p,dialogVis:f,dialogData:d,curOperation:r,tmpDialogVis:g,page:t,fetchData:o,onUpdate:T,onSubmit:D,onSearch:E,resetForm:S,handleSizeChange:F,handleCurrentChange:M}}export{C as u};
