import{i as L,L as D}from"./index-e7501ed3.js";import{x as R,a$ as E,_ as T,f as u,J as B,g as I,k as N,r as v,o as b,c as x,a as t,n as _,b as p,w as W,F as w,i as A}from"./index-267246aa.js";import{o as M}from"./patrolGuard-eead8834.js";import"./axios-da025460.js";import"./index-1899286b.js";function y(r,a){const l=R(r);if(!l)return;let o=L(l);o.setOption(a),window.addEventListener("resize",i);function s(){return o}function i(){o==null||o.resize()}return E(()=>{o&&(o.dispose(),o=null,window.removeEventListener("resize",i))}),{resize:i,getInstance:s}}function O(r){const a=[],l=[];return r.forEach(s=>{a.push(s.name),l.push(s.value)}),console.log(l),{grid:{left:"5%",right:"5%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}}},legend:{show:!1,top:"2%",right:"2%",textStyle:{color:"#ffffff"}},xAxis:{data:a,axisLine:{show:!0,lineStyle:{color:"#01FCE3"}},axisTick:{show:!0},axisLabel:{show:!0,textStyle:{color:"#ebf8ac"}}},yAxis:[{type:"value",nameTextStyle:{color:"#ebf8ac"},splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!0,lineStyle:{color:"#FFFFFF"}},axisLabel:{show:!0,textStyle:{color:"#ebf8ac"}}}],series:[{name:"人员巡检次数",type:"bar",barWidth:15,itemStyle:{normal:{color:new D(0,0,0,1,[{offset:0,color:"#248ff7"},{offset:1,color:"#6851f1"}])}},data:l}]}}function $(r){const a=r||[{name:"发电机",value:3},{name:"工程机",value:2},{name:"启闭机",value:26},{name:"水工设施",value:24},{name:"闸门",value:12}];console.log(a);const l=a.map(s=>s.name);return{animation:!0,title:{text:20,subtext:"总数",left:"31.5%",top:"38%",textStyle:{color:"#fff",fontSize:36,fontWeight:"normal",align:"center"},subtextStyle:{color:"#fff",fontSize:18,fontWeight:"normal",align:"center"}},tooltip:{trigger:"item"},legend:{textStyle:{color:"#fff",fontSize:16},orient:"vertical",icon:"circle",right:"2%",bottom:"center",data:l},series:[{type:"pie",center:["35%","50%"],radius:["40%","65%"],label:{normal:{formatter:"{b|{b}:}  {per|{d}%} ",backgroundColor:"rgba(255, 147, 38, 0)",borderColor:"transparent",borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:1,height:0},b:{color:"#b3e5ff",fontSize:16,lineHeight:33},c:{fontSize:14,color:"#eee"},per:{color:"#FDF44E",fontSize:14,borderRadius:2}},textStyle:{color:"#fff",fontSize:16}}},labelLine:{normal:{length:5,length2:3,smooth:!0}},data:a}]}}const G={class:"top box"},H={class:"bottom"},V={class:"left box"},Y={class:"header"},J={class:"btnGroup"},P={class:"table"},U={class:"right box"},q={__name:"index",setup(r){const a=new Date().getFullYear().toString(),l=new Date().getMonth()-1,o=u();u();const s=u(),i=u("jctj"),S=[{prop:"name",label:"检查对象"},{prop:"times",label:"巡查次数"}],j=[{name:"发电机检查记录表",times:"3"},{name:"发电机检查记录表",times:"4"},{name:"发电机检查记录表",times:"3"},{name:"发电机检查记录表",times:"5"},{name:"发电机检查记录表",times:"3"}];B({year:a||"2024",month:a+"-"+l,status:"",member:""});let c=u({patrolNumSingleResInfos:[],patrolStatic:[],protectStatic:[]});const f=u(j);async function k(){try{const{code:n,data:e}=await M();n===1&&(c.value=e)}catch(n){console.log(n)}}I(()=>{N(async()=>{console.log("object"),await k(),f.value=c.value.patrolStatic,z()})});function m(n){i.value=n,n==="jctj"?f.value=c.value.patrolStatic:f.value=c.value.protectStatic}function h(n){return n.map(e=>({name:e.name,value:e.times}))}function z(){const n=h(c.value.patrolNumSingleResInfos),e=h(c.value.protectStatic);y(o,O(n)),y(s,$(e))}return(n,e)=>{const g=v("el-table-column"),C=v("el-table");return b(),x(w,null,[t("div",G,[e[2]||(e[2]=t("div",{class:"header"},[t("div",{class:"img"}),t("div",{class:"title"},"检查次数统计")],-1)),t("div",{class:"chart",ref_key:"barChartRef",ref:o},null,512)]),t("div",H,[t("div",V,[t("div",Y,[e[3]||(e[3]=t("div",{class:"img"},null,-1)),e[4]||(e[4]=t("div",{class:"title"},"检查管护统计",-1)),t("div",J,[t("div",{class:_(["btn",{active:i.value==="jctj"}]),onClick:e[0]||(e[0]=d=>m("jctj"))},"检查统计",2),t("div",{class:_(["btn",{active:i.value==="ghtj"}]),onClick:e[1]||(e[1]=d=>m("ghtj"))},"管护统计",2)])]),t("div",P,[p(C,{data:f.value,class:"custom-table deep","highlight-current-row":"",height:"100%"},{default:W(()=>[p(g,{type:"index",label:"序号",align:"center",width:"180px"}),(b(),x(w,null,A(S,(d,F)=>p(g,{key:F,prop:d.prop,label:d.label,width:d.width,align:"center","show-overflow-tooltip":""},null,8,["prop","label","width"])),64))]),_:1},8,["data"])])]),t("div",U,[e[5]||(e[5]=t("div",{class:"header"},[t("div",{class:"img"}),t("div",{class:"title"},"管护对象")],-1)),t("div",{class:"chart",ref_key:"pieRightRef",ref:s},null,512)])])],64)}}},te=T(q,[["__scopeId","data-v-da046e2d"]]);export{te as default};
