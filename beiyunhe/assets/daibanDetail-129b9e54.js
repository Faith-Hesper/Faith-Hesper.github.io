import{_ as O}from"./title_child_icon-88388056.js";import{_ as S}from"./return_icon-1226930e.js";import{_ as E,u as R,f as d,g as A,r as u,o as s,c as i,a,F as b,i as h,b as r,C as p,x as _,w as c,A as P,n as $,t as j,v as f}from"./index-79e36b83.js";import{F as z}from"./FlowView-f4245c4d.js";import{R as G}from"./RepairInfo-6315756b.js";import{n as J}from"./engineeringAPI-21148e34.js";import{b as T,a as q}from"./systemAPI-159b07b8.js";import{b as H}from"./unit-ac192840.js";import"./axios-c0524c3b.js";const K={class:"detail"},Q={class:"main"},W={class:"left"},X={class:"tab"},Y=["onClick"],Z={key:0,class:"content"},ee={key:1,class:"content flow"},te={class:"right"},ae={class:"content"},oe={class:"footer"},se={__name:"daibanDetail",setup(le){const x=R(),I=window.config,m=d(!1),n=JSON.parse(H("maintenanceData"));console.log(n),m.value=n.step=="分配维修人员";const l=d({processMethod:null,repairerId:"",flowComment:"",approve:"",flowId:n.flowId,id:n.id}),y=d([]),k=d([]),v=d([{name:"表单",type:1,active:!0},{name:"流程",type:2,active:!1}]),B=o=>{v.value.forEach(e=>{e.active=!1,e.type===o.type&&(e.active=!0)})},M=o=>{console.log(o),o=="0"?m.value=!1:m.value=!0},C=()=>{x.push("/engineering/maintenance/daiban")},N=()=>{V(!0)},U=()=>{V(!1)},V=o=>{l.value.approve=o,J(l.value).then(e=>{console.log(e),C(),P({message:e.msg,type:"success"})})};return A(()=>{T().then(o=>{k.value=o.data.records}),q(I.dictObject.DictGcApprovemethod).then(o=>{console.log(o.data),y.value=o.data})}),(o,e)=>{const w=u("el-option"),D=u("el-select"),g=u("el-form-item"),F=u("el-input"),L=u("el-form");return s(),i("div",K,[a("header",null,[e[4]||(e[4]=a("div",{class:"left"},[a("img",{src:O,class:"img",alt:""}),a("div",{class:"text"},"设备故障办理")],-1)),a("div",{class:"right",onClick:C},e[3]||(e[3]=[a("img",{src:S,class:"img",alt:""},null,-1),a("div",{class:"text"},"返回",-1)]))]),a("div",Q,[a("div",W,[a("div",X,[(s(!0),i(b,null,h(v.value,t=>(s(),i("div",{class:$(["tab-item",{active:t.active}]),key:t.type,onClick:ne=>B(t)},j(t.name),11,Y))),128))]),v.value[0].active?(s(),i("div",Z,[r(G)])):p("",!0),v.value[1].active?(s(),i("div",ee,[r(z,{data:_(n)},null,8,["data"])])):p("",!0)]),a("div",te,[e[5]||(e[5]=a("div",{class:"title"},"审批",-1)),a("div",ae,[r(L,{model:l.value,"label-width":"140px","label-position":"right"},{default:c(()=>[_(n).step=="所长审批"||_(n).step=="驳回"?(s(),f(g,{key:0,label:"处理方式："},{default:c(()=>[r(D,{modelValue:l.value.processMethod,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.processMethod=t),onChange:M,class:"com-select"},{default:c(()=>[(s(!0),i(b,null,h(y.value,t=>(s(),f(w,{key:t.dictValue,label:t.dictLabel,value:t.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):p("",!0),m.value?(s(),f(g,{key:1,label:"维修人员："},{default:c(()=>[r(D,{modelValue:l.value.repairerId,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.repairerId=t),class:"com-select"},{default:c(()=>[(s(!0),i(b,null,h(k.value,t=>(s(),f(w,{key:t.id,label:t.nickName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):p("",!0),r(g,{label:"审批意见："},{default:c(()=>[r(F,{modelValue:l.value.flowComment,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.flowComment=t),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a("div",oe,[a("div",{class:"search-btn",onClick:N},"提交"),_(n).step=="管理处领导审批"?(s(),i("div",{key:0,class:"reset-btn",onClick:U},"驳回")):p("",!0)])])])])])}}},fe=E(se,[["__scopeId","data-v-05d4128a"]]);export{fe as default};
