import{_ as Q}from"./close_icon-79cdeb99.js";import{d as W}from"./dialogRemoveCom-acb7236a.js";import{c as X,b as Y,u as Z,d as ee}from"./systemAPI-88b64bb8.js";import{l as le,m as ae,n as te,d as se}from"./unit-ac192840.js";import{_ as oe,f as d,J as ne,g as ue,r as u,o as r,c as i,a as n,b as l,w as t,C as E,x as N,v,A as I,F as S,i as U,K as de,n as re,t as ce}from"./index-267246aa.js";import"./axios-da025460.js";const pe={class:"sys_body"},ie={class:"top"},me={class:"search"},_e={class:"table"},ve=["onClick"],be=["onClick"],fe={key:0,class:"sys_dialog"},Ve={class:"content"},ge={class:"main"},ke={__name:"index",setup(ye){const o=d({}),T=d([]),b=d(!1),m=d(""),F={children:"children",label:"name",disabled:"disabled"};let f=ne({});const M=d([{label:"用户名",prop:"nickName"},{label:"账号",prop:"username"},{label:"电话",prop:"phoneNumber"},{label:"部门",prop:"deptName"},{label:"状态",prop:"userStatus"}]),D=d([]),B=d(ae()),O=d(te());let V=d(!1);const P=()=>{m.value="",y()},g=()=>{y({username:m.value})},$=s=>{o.value=se(s),b.value=!0},k=()=>{b.value=!1;for(let s in o.value)o.value[s]=""},z=()=>{Z(o.value).then(s=>{H(s)})},H=s=>{I({message:s.msg,type:"success"}),k(),g()},J=s=>{s.removeText="用户："+s.nickName,f=s,V.value=!0},R=()=>{V.value=!1},K=()=>{ee({id:f.id}).then(s=>{I({message:s.msg,type:"success"}),R(),g()})};ue(()=>{y(),X().then(s=>{T.value=s.data})});const y=s=>{Y(s||{}).then(a=>{console.log(a.data.records),D.value=a.data.records})};return(s,a)=>{const _=u("el-input"),h=u("el-table-column"),j=u("el-table"),c=u("el-form-item"),p=u("el-col"),C=u("el-row"),q=u("el-tree-select"),L=u("el-option"),A=u("el-select"),G=u("el-form");return r(),i("div",pe,[n("div",ie,[n("div",me,[a[7]||(a[7]=n("div",{class:"type"},"用户名称",-1)),l(_,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),class:"search-input",placeholder:"请输入关键字"},null,8,["modelValue"]),n("div",{class:"search-btn",onClick:g},"查询"),n("div",{class:"reset-btn",onClick:P},"重置")])]),n("div",_e,[l(j,{data:D.value,height:"100%"},{default:t(()=>[l(h,{type:"index",width:"70",label:"序号",align:"center"}),(r(!0),i(S,null,U(M.value,(e,w)=>(r(),v(h,{key:w,prop:e.prop,label:e.label,"class-name":e.label==="状态"?"status":"",align:"center","show-overflow-tooltip":""},de({_:2},[e.label==="状态"?{name:"default",fn:t(x=>[n("span",{class:re({disabled:x.row.userStatus==="1",normal:x.row.userStatus==="0"})},ce(N(le)(B.value,"dictValue",x.row.userStatus,"dictLabel")),3)]),key:"0"}:void 0]),1032,["prop","label","class-name"]))),128)),l(h,{label:"操作",align:"center"},{default:t(e=>[n("span",{class:"oper-span oper-edit",onClick:w=>$(e.row)},"编辑",8,ve),n("span",{class:"oper-span oper-remove",onClick:w=>J(e.row)},"删除",8,be)]),_:1})]),_:1},8,["data"])]),b.value?(r(),i("div",fe,[n("div",Ve,[n("div",{class:"header"},[a[8]||(a[8]=n("div",{class:"title"},"编辑",-1)),n("img",{src:Q,alt:"",class:"close",onClick:k})]),n("div",ge,[l(G,{model:o.value,"label-width":"120px","label-position":"right"},{default:t(()=>[l(C,null,{default:t(()=>[l(p,{span:12},{default:t(()=>[l(c,{label:"用户名"},{default:t(()=>[l(_,{modelValue:o.value.nickName,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.nickName=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:t(()=>[l(c,{label:"账号"},{default:t(()=>[l(_,{modelValue:o.value.username,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.username=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(C,null,{default:t(()=>[l(p,{span:12},{default:t(()=>[l(c,{label:"电话"},{default:t(()=>[l(_,{modelValue:o.value.phoneNumber,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.phoneNumber=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:t(()=>[l(c,{label:"部门"},{default:t(()=>[l(q,{class:"tree-select custom-tree",modelValue:o.value.deptId,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.deptId=e),"node-key":"id",data:T.value,props:F,"render-after-expand":!1,"check-strictly":!0},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1}),l(C,null,{default:t(()=>[l(p,{span:12},{default:t(()=>[l(c,{label:"状态"},{default:t(()=>[l(A,{modelValue:o.value.userStatus,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.userStatus=e)},{default:t(()=>[(r(!0),i(S,null,U(B.value,e=>(r(),v(L,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:t(()=>[l(c,{label:"用户类型"},{default:t(()=>[l(A,{modelValue:o.value.userType,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.userType=e)},{default:t(()=>[(r(!0),i(S,null,U(O.value,e=>(r(),v(L,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),n("div",{class:"footer"},[n("div",{class:"reset-btn",onClick:k},"取消"),n("div",{class:"search-btn",onClick:z},"确定")])])])):E("",!0),N(V)?(r(),v(W,{key:1,data:N(f),onCloseRemove:R,onSubRemove:K},null,8,["data"])):E("",!0)])}}},Ue=oe(ke,[["__scopeId","data-v-b90177bf"]]);export{Ue as default};
