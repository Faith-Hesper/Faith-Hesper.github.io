define(["./createTaskProcessorWorker-03824364","./Resource-be841477","./Cartesian3-e96ac170","./HouseDrawer","./ParseBinaryData","./GetPrimitiveData","./PolygonBuffer","./defer-7878b392","./defaultValue-9f6a6288","./defined-64766648","./Math-56779564","./combine-ac72e009","./RuntimeError-cfbf2bc8","./Buffer","./base64","./ieee754","./isArray","./VarintReader","./snappyJs","./CodeTool","./GisTools","./VarintReaderV3","./ZstdLoader","./zstd_wasm","./Color-cad7c885","./Transforms-b1e48e05","./Ellipsoid-fa58f06f","./GeographicProjection-868b0b16","./Matrix3-59918a96","./Matrix2-e52b9454","./Cartesian2-0a34ed75","./ComponentDatatype-63fd8cd4","./WebGLConstants-7f557f93","./GeometryInstance-a555221e","./PolygonGeometry-9ef51ca3","./ArcType-26a3f38d","./BoundingRectangle-3100662d","./EllipsoidGeodesic-9e013872","./EllipsoidTangentPlane-8f36a7e0","./AxisAlignedBoundingBox-8b4e9f9c","./IntersectionTests-39c3b1c1","./Plane-f9bf6226","./Geometry-dd0ae099","./GeometryAttribute-5ac032ac","./GeometryOffsetAttribute-2579b8d2","./GeometryPipeline-92c34dd1","./AttributeCompression-44abee07","./EncodedCartesian3-e0f0a7d1","./IndexDatatype-ed8b21cb","./PolygonGeometryLibrary-37fe200f","./arrayRemoveDuplicates-d0608faf","./EllipsoidRhumbLine-cea00df6","./GeometryAttributes-3de79df5","./PolygonPipeline-d79010c3","./VertexFormat-01d05a0d","./PolygonOutlineGeometry-9f19e302","./Texture-3b0b528f","./PixelFormat-5109196d","./PrimitivePipeline-7bd2b931","./WebMercatorProjection-78306e76","./GetRidingLanternGeometry","./turf.min"],(function(e,t,r,o,n,i,l,a,s,u,f,c,y,h,g,d,m,p,P,G,b,v,A,D,w,x,B,C,R,T,F,V,E,I,L,M,k,S,W,j,q,O,H,N,z,J,_,U,Z,$,K,Q,X,Y,ee,te,re,oe,ne,ie,le,ae){"use strict";let se,ue=512,fe={},ce={},ye={};function he(e,t){if("F"!=e[0])if(Array.isArray(e[0])){let r=e.length;for(let o=0;o<r;o++){he(e[o],t)}}else t&&function(e){let t=[e[0],e[1]];for(let r=2;r<e.length;r++){let o=t[0]+e[r],n=t[1]+e[r+1];e[r]=o,e[r+1]=n,t=[o,n],r++}}(e);else e[0]=[.05*-ue,.05*-ue,1.05*ue,.05*-ue,1.05*ue,1.05*ue,.05*-ue,1.05*ue]}function ge(e,t){if(Array.isArray(t[0])){let r=t.length;for(let o=0;o<r;o++){ge(e,t[o])}}else e.push(t)}function de(e,t){let r=t.rectangle,o=[];for(let t=0;t<e.length;t++){let n=me(e[t],e[t+1],r);o.push(n[0]),o.push(n[1]),t++}return o}function me(e,t,r){let o=pe(r.west+r.width/ue*e),n=pe(r.north-r.height/ue*t);return o=Number(o.toFixed(6)),n=Number(n.toFixed(6)),[o,n]}function pe(e){return 180*e/Math.PI}return e.createTaskProcessorWorker((async function(e,s){if(1==e.init)return void function(e){let t=a.defer();se=new Function("render","level",e.styleStr),ue=e.tileSize,e.return_type,fe=e,ce=e.serverInfo,ye=e.layerFieldMap,t.resolve({}),t.promise}(e);let u=e.url,f=new t.Resource({url:u});f.request.throttle=!1,f.request.throttleByServer=!0,f.request.type=1;let c=f.fetchArrayBuffer();if(!c)return!0;let y=a.defer();return c.then((async function(t){if(!t)return void y.resolve({});let a=function(e,t){if(e){!function(e,t){for(let r in e){let o=e[r].features;o||(o=e[r].datas);for(let e=0;e<o.length;e++)he(o[e][2],t)}}(e,t.needDecode);let r={},n=new o([e],t.level,r,t.controlVector,t.highLightVector,t.filterLayerId);return se.call({},n,t.level),function(e){for(let t in e){let r=e[t];for(let e=0;e<r.length;e++){let t=r[e],o=[];ge(o,t.data),delete t.data,t.geometrys=o;let n=0;if(fe.hasOwnProperty("heightProperty")){let e=fe.heightProperty;n=t.properties[e],fe.hasOwnProperty("heightScale")&&(n*=parseFloat(fe.heightScale))}t.height=n,t.totalHeight=n}}}(r),r}return{}}(await n(t,ye,ce),e);!function(e,t){for(let r in e){let o=e[r];for(let e=0;e<o.length;e++){let r=o[e],n=[];for(let e=0;e<r.geometrys.length;e++){let o=de(r.geometrys[e],t);n.push(o)}r.geometrys=n}}}(a,e),0!=e.bufferDistance&&l.buffer(a,.001*e.bufferDistance),function(e){for(let t in e){e[t].map((e=>{let t=[];for(let o=0;o<e.geometrys.length;o++){let n=e.geometrys[o],i=[];for(let e=0;e<n.length;e++){let t=n[e],o=n[e+1],l=r.Cartesian3.fromDegrees(t,o);i.push(l),e++}t.push(i)}e.polygons=t,delete e.geometrys}))}}(a);let u=i(a,e.level,fe,s);y.resolve(u)}),(function(e){y.reject(e)})),y.promise}))}));
