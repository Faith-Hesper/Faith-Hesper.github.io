define((function(){"use strict";function n(n,r,t){return{r:255*t(n.r/255,r.r/255),g:255*t(n.g/255,r.g/255),b:255*t(n.b/255,r.b/255)}}function r(n,r){return r}function t(n,r){return n*r}function u(n,r){return n+r-n*r}function i(n,r){return f(r,n)}function o(n,r){return Math.min(n,r)}function e(n,r){return Math.min(Math.max(n,r),1)}function c(n,r){return 0===n?0:1===r?1:Math.min(1,n/(1-r))}function a(n,r){return 1===n?1:0===r?0:1-Math.min(1,(1-n)/r)}function f(n,r){return r<=.5?t(n,2*r):u(n,2*r-1)}function g(n,r){return r<=.5?n-(1-2*r)*n*(1-n):n+(2*r-1)*((n<=.25?((16*n-12)*n+4)*n:Math.sqrt(n))-n)}function b(n,r){return Math.abs(n-r)}function h(n,r){return n+r-2*n*r}function M(n,r,t){return Math.min(Math.max(n||0,r),t)}function m(n){return{r:M(n.r,0,255),g:M(n.g,0,255),b:M(n.b,0,255),a:M(n.a,0,1)}}function d(n){return{r:255*n.r,g:255*n.g,b:255*n.b,a:n.a}}function l(n){return{r:n.r/255,g:n.g/255,b:n.b/255,a:n.a}}function s(n,r){void 0===r&&(r=0);var t=Math.pow(10,r);return{r:Math.round(n.r*t)/t,g:Math.round(n.g*t)/t,b:Math.round(n.b*t)/t,a:n.a}}function v(n,r,t,u,i,o){return(1-r/t)*u+r/t*Math.round((1-n)*i+n*o)}function p(n,r,t,u,i){void 0===i&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(n=d(n),r=d(r)),n=m(n);var o=(r=m(r)).a+n.a-r.a*n.a,e=t(n,r,u),c=m({r:v(n.a,r.a,o,n.r,r.r,e.r),g:v(n.a,r.a,o,n.g,r.g,e.g),b:v(n.a,r.a,o,n.b,r.b,e.b),a:o});return i.unitOutput?l(c):i.roundOutput?s(c):s(c,9)}function x(n,r,t){return d(t(l(n),l(r)))}function O(n){return.3*n.r+.59*n.g+.11*n.b}function y(n,r){var t=r-O(n);return function(n){var r=O(n),t=n.r,u=n.g,i=n.b,o=Math.min(t,u,i),e=Math.max(t,u,i);function c(n){return r+(n-r)*r/(r-o)}function a(n){return r+(n-r)*(1-r)/(e-r)}return o<0&&(t=c(t),u=c(u),i=c(i)),e>1&&(t=a(t),u=a(u),i=a(i)),{r:t,g:u,b:i}}({r:n.r+t,g:n.g+t,b:n.b+t})}function I(n){return Math.max(n.r,n.g,n.b)-Math.min(n.r,n.g,n.b)}function L(n,r){var t=["r","g","b"].sort((function(r,t){return n[r]-n[t]})),u=t[0],i=t[1],o=t[2],e={r:n.r,g:n.g,b:n.b};return e[o]>e[u]?(e[i]=(e[i]-e[u])*r/(e[o]-e[u]),e[o]=r):e[i]=e[o]=0,e[u]=0,e}function k(n,r){return y(L(r,I(n)),O(n))}function q(n,r){return y(L(n,I(r)),O(n))}function w(n,r){return y(r,O(n))}function B(n,r){return y(n,O(r))}var D={color:function(n,r){return p(n,r,x,w)},colorBurn:function(r,t){return p(r,t,n,a)},colorDodge:function(r,t){return p(r,t,n,c)},darken:function(r,t){return p(r,t,n,o)},difference:function(r,t){return p(r,t,n,b)},exclusion:function(r,t){return p(r,t,n,h)},hardLight:function(r,t){return p(r,t,n,f)},hue:function(n,r){return p(n,r,x,k)},lighten:function(r,t){return p(r,t,n,e)},luminosity:function(n,r){return p(n,r,x,B)},multiply:function(r,u){return p(r,u,n,t)},normal:function(t,u){return p(t,u,n,r)},overlay:function(r,t){return p(r,t,n,i)},saturation:function(n,r){return p(n,r,x,q)},screen:function(r,t){return p(r,t,n,u)},softLight:function(r,t){return p(r,t,n,g)}};return D}));
