define((function(){"use strict";var e,r,t,n={};return n.toRGBA8=function(e){var r=e.width,t=e.height;if(null==e.tabs.acTL)return[n.toRGBA8.decodeImage(e.data,r,t,e).buffer];var a=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var f=r*t*4,i=new Uint8Array(f),o=new Uint8Array(f),c=new Uint8Array(f),s=0;s<e.frames.length;s++){var d=e.frames[s],l=d.rect.x,u=d.rect.y,v=d.rect.width,h=d.rect.height,b=n.toRGBA8.decodeImage(d.data,v,h,e);if(0!=s)for(var w=0;w<f;w++)c[w]=i[w];if(0==d.blend?n._copyTile(b,v,h,i,r,t,l,u,0):1==d.blend&&n._copyTile(b,v,h,i,r,t,l,u,1),a.push(i.buffer.slice(0)),0==d.dispose);else if(1==d.dispose)n._copyTile(o,v,h,i,r,t,l,u,0);else if(2==d.dispose)for(w=0;w<f;w++)i[w]=c[w]}return a},n.toRGBA8.decodeImage=function(e,r,t,a){var f=r*t,i=n.decode._getBPP(a),o=Math.ceil(r*i/8),c=new Uint8Array(4*f),s=new Uint32Array(c.buffer),d=a.ctype,l=a.depth,u=n._bin.readUshort;if(6==d){var v=f<<2;if(8==l)for(var h=0;h<v;h+=4)c[h]=e[h],c[h+1]=e[h+1],c[h+2]=e[h+2],c[h+3]=e[h+3];if(16==l)for(h=0;h<v;h++)c[h]=e[h<<1]}else if(2==d){var b=a.tabs.tRNS;if(null==b){if(8==l)for(h=0;h<f;h++){var w=3*h;s[h]=255<<24|e[w+2]<<16|e[w+1]<<8|e[w]}if(16==l)for(h=0;h<f;h++){w=6*h;s[h]=255<<24|e[w+4]<<16|e[w+2]<<8|e[w]}}else{var p=b[0],g=b[1],_=b[2];if(8==l)for(h=0;h<f;h++){var y=h<<2;w=3*h;s[h]=255<<24|e[w+2]<<16|e[w+1]<<8|e[w],e[w]==p&&e[w+1]==g&&e[w+2]==_&&(c[y+3]=0)}if(16==l)for(h=0;h<f;h++){y=h<<2,w=6*h;s[h]=255<<24|e[w+4]<<16|e[w+2]<<8|e[w],u(e,w)==p&&u(e,w+2)==g&&u(e,w+4)==_&&(c[y+3]=0)}}}else if(3==d){var A=a.tabs.PLTE,U=a.tabs.tRNS,H=U?U.length:0;if(1==l)for(var m=0;m<t;m++){var I=m*o,T=m*r;for(h=0;h<r;h++){y=T+h<<2;var R=3*(C=e[I+(h>>3)]>>7-((7&h)<<0)&1);c[y]=A[R],c[y+1]=A[R+1],c[y+2]=A[R+2],c[y+3]=C<H?U[C]:255}}if(2==l)for(m=0;m<t;m++)for(I=m*o,T=m*r,h=0;h<r;h++){y=T+h<<2,R=3*(C=e[I+(h>>2)]>>6-((3&h)<<1)&3);c[y]=A[R],c[y+1]=A[R+1],c[y+2]=A[R+2],c[y+3]=C<H?U[C]:255}if(4==l)for(m=0;m<t;m++)for(I=m*o,T=m*r,h=0;h<r;h++){y=T+h<<2,R=3*(C=e[I+(h>>1)]>>4-((1&h)<<2)&15);c[y]=A[R],c[y+1]=A[R+1],c[y+2]=A[R+2],c[y+3]=C<H?U[C]:255}if(8==l)for(h=0;h<f;h++){var C;y=h<<2,R=3*(C=e[h]);c[y]=A[R],c[y+1]=A[R+1],c[y+2]=A[R+2],c[y+3]=C<H?U[C]:255}}else if(4==d){if(8==l)for(h=0;h<f;h++){y=h<<2;var S=e[B=h<<1];c[y]=S,c[y+1]=S,c[y+2]=S,c[y+3]=e[B+1]}if(16==l)for(h=0;h<f;h++){var B;y=h<<2,S=e[B=h<<2];c[y]=S,c[y+1]=S,c[y+2]=S,c[y+3]=e[B+2]}}else if(0==d)for(p=a.tabs.tRNS?a.tabs.tRNS:-1,m=0;m<t;m++){var P=m*o,M=m*r;if(1==l)for(var D=0;D<r;D++){var Z=(S=255*(e[P+(D>>>3)]>>>7-(7&D)&1))==255*p?0:255;s[M+D]=Z<<24|S<<16|S<<8|S}else if(2==l)for(D=0;D<r;D++){Z=(S=85*(e[P+(D>>>2)]>>>6-((3&D)<<1)&3))==85*p?0:255;s[M+D]=Z<<24|S<<16|S<<8|S}else if(4==l)for(D=0;D<r;D++){Z=(S=17*(e[P+(D>>>1)]>>>4-((1&D)<<2)&15))==17*p?0:255;s[M+D]=Z<<24|S<<16|S<<8|S}else if(8==l)for(D=0;D<r;D++){Z=(S=e[P+D])==p?0:255;s[M+D]=Z<<24|S<<16|S<<8|S}else if(16==l)for(D=0;D<r;D++){S=e[P+(D<<1)],Z=u(e,P+(D<<h))==p?0:255;s[M+D]=Z<<24|S<<16|S<<8|S}}return c},n.isPNG=function(e){for(var r=[137,80,78,71,13,10,26,10],t=0;t<8;t++)if(e[t]!=r[t])return!1;return!0},n.decode=function(e){for(var r,t=new Uint8Array(e),a=8,f=n._bin,i=f.readUshort,o=f.readUint,c={tabs:{},frames:[]},s=new Uint8Array(t.length),d=0,l=0;a<t.length;){var u=f.readUint(t,a);a+=4;var v=f.readASCII(t,a,4);if(a+=4,"IHDR"==v)n.decode._IHDR(t,a,c);else if("CgBI"==v)c.tabs[v]=t.slice(a,a+4);else if("IDAT"==v){for(var h=0;h<u;h++)s[d+h]=t[a+h];d+=u}else if("acTL"==v)c.tabs[v]={num_frames:o(t,a),num_plays:o(t,a+4)},r=new Uint8Array(t.length);else if("fcTL"==v){var b;if(0!=l)(b=c.frames[c.frames.length-1]).data=n.decode._decompress(c,r.slice(0,l),b.rect.width,b.rect.height),l=0;var w={x:o(t,a+12),y:o(t,a+16),width:o(t,a+4),height:o(t,a+8)},p=i(t,a+22);p=i(t,a+20)/(0==p?100:p);var g={rect:w,delay:Math.round(1e3*p),dispose:t[a+24],blend:t[a+25]};c.frames.push(g)}else if("fdAT"==v){for(h=0;h<u-4;h++)r[l+h]=t[a+h+4];l+=u-4}else if("pHYs"==v)c.tabs[v]=[f.readUint(t,a),f.readUint(t,a+4),t[a+8]];else if("cHRM"==v){c.tabs[v]=[];for(h=0;h<8;h++)c.tabs[v].push(f.readUint(t,a+4*h))}else if("tEXt"==v||"zTXt"==v){null==c.tabs[v]&&(c.tabs[v]={});var _=f.nextZero(t,a),y=f.readASCII(t,a,_-a),A=a+u-_-1;if("tEXt"==v)I=f.readASCII(t,_+1,A);else{var U=n.decode._inflate(t.slice(_+2,_+2+A));I=f.readUTF8(U,0,U.length)}c.tabs[v][y]=I}else if("iTXt"==v){null==c.tabs[v]&&(c.tabs[v]={});_=0;var H=a;_=f.nextZero(t,H);y=f.readASCII(t,H,_-H);var m=t[H=_+1];t[H+1],H+=2,_=f.nextZero(t,H),f.readASCII(t,H,_-H),H=_+1,_=f.nextZero(t,H),f.readUTF8(t,H,_-H);var I;A=u-((H=_+1)-a);if(0==m)I=f.readUTF8(t,H,A);else{U=n.decode._inflate(t.slice(H,H+A));I=f.readUTF8(U,0,U.length)}c.tabs[v][y]=I}else if("PLTE"==v)c.tabs[v]=f.readBytes(t,a,u);else if("hIST"==v){var T=c.tabs.PLTE.length/3;c.tabs[v]=[];for(h=0;h<T;h++)c.tabs[v].push(i(t,a+2*h))}else if("tRNS"==v)3==c.ctype?c.tabs[v]=f.readBytes(t,a,u):0==c.ctype?c.tabs[v]=i(t,a):2==c.ctype&&(c.tabs[v]=[i(t,a),i(t,a+2),i(t,a+4)]);else if("gAMA"==v)c.tabs[v]=f.readUint(t,a)/1e5;else if("sRGB"==v)c.tabs[v]=t[a];else if("bKGD"==v)0==c.ctype||4==c.ctype?c.tabs[v]=[i(t,a)]:2==c.ctype||6==c.ctype?c.tabs[v]=[i(t,a),i(t,a+2),i(t,a+4)]:3==c.ctype&&(c.tabs[v]=t[a]);else if("IEND"==v)break;a+=u,f.readUint(t,a),a+=4}0!=l&&((b=c.frames[c.frames.length-1]).data=n.decode._decompress(c,r.slice(0,l),b.rect.width,b.rect.height),l=0);return c.data=n.decode._decompress(c,s,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c},n.decode._decompress=function(e,r,t,a){var f=n.decode._getBPP(e),i=Math.ceil(t*f/8),o=new Uint8Array((i+1+e.interlace)*a);return r=e.tabs.CgBI?n.inflateRaw(r,o):n.decode._inflate(r,o),0==e.interlace?r=n.decode._filterZero(r,e,0,t,a):1==e.interlace&&(r=n.decode._readInterlace(r,e)),r},n.decode._inflate=function(e,r){return n.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),r)},n.inflateRaw=((t={}).H={},t.H.N=function(e,r){var n,a,f=Uint8Array,i=0,o=0,c=0,s=0,d=0,l=0,u=0,v=0,h=0;if(3==e[0]&&0==e[1])return r||new f(0);var b=t.H,w=b.b,p=b.e,g=b.R,_=b.n,y=b.A,A=b.Z,U=b.m,H=null==r;for(H&&(r=new f(e.length>>>2<<5));0==i;)if(i=w(e,h,1),o=w(e,h+1,2),h+=3,0!=o){if(H&&(r=t.H.W(r,v+(1<<17))),1==o&&(n=U.J,a=U.h,l=511,u=31),2==o){c=p(e,h,5)+257,s=p(e,h+5,5)+1,d=p(e,h+10,4)+4,h+=14;for(var m=1,I=0;I<38;I+=2)U.Q[I]=0,U.Q[I+1]=0;for(I=0;I<d;I++){var T=p(e,h+3*I,3);U.Q[1+(U.X[I]<<1)]=T,T>m&&(m=T)}h+=3*d,_(U.Q,m),y(U.Q,m,U.u),n=U.w,a=U.d,h=g(U.u,(1<<m)-1,c+s,e,h,U.v);var R=b.V(U.v,0,c,U.C);l=(1<<R)-1;var C=b.V(U.v,c,s,U.D);u=(1<<C)-1,_(U.C,R),y(U.C,R,n),_(U.D,C),y(U.D,C,a)}for(;;){var S=n[A(e,h)&l];h+=15&S;var B=S>>>4;if(B>>>8==0)r[v++]=B;else{if(256==B)break;var P=v+B-254;if(B>264){var M=U.q[B-257];P=v+(M>>>3)+p(e,h,7&M),h+=7&M}var D=a[A(e,h)&u];h+=15&D;var Z=D>>>4,N=U.c[Z],x=(N>>>4)+w(e,h,15&N);for(h+=15&N;v<P;)r[v]=r[v++-x],r[v]=r[v++-x],r[v]=r[v++-x],r[v]=r[v++-x];v=P}}}else{0!=(7&h)&&(h+=8-(7&h));var G=4+(h>>>3),Q=e[G-4]|e[G-3]<<8;H&&(r=t.H.W(r,v+Q)),r.set(new f(e.buffer,e.byteOffset+G,Q),v),h=G+Q<<3,v+=Q}return r.length==v?r:r.slice(0,v)},t.H.W=function(e,r){var t=e.length;if(r<=t)return e;var n=new Uint8Array(t<<1);return n.set(e,0),n},t.H.R=function(e,r,n,a,f,i){for(var o=t.H.e,c=t.H.Z,s=0;s<n;){var d=e[c(a,f)&r];f+=15&d;var l=d>>>4;if(l<=15)i[s]=l,s++;else{var u=0,v=0;16==l?(v=3+o(a,f,2),f+=2,u=i[s-1]):17==l?(v=3+o(a,f,3),f+=3):18==l&&(v=11+o(a,f,7),f+=7);for(var h=s+v;s<h;)i[s]=u,s++}}return f},t.H.V=function(e,r,t,n){for(var a=0,f=0,i=n.length>>>1;f<t;){var o=e[f+r];n[f<<1]=0,n[1+(f<<1)]=o,o>a&&(a=o),f++}for(;f<i;)n[f<<1]=0,n[1+(f<<1)]=0,f++;return a},t.H.n=function(e,r){for(var n,a,f,i,o=t.H.m,c=e.length,s=o.j,d=0;d<=r;d++)s[d]=0;for(d=1;d<c;d+=2)s[e[d]]++;var l=o.K;for(n=0,s[0]=0,a=1;a<=r;a++)n=n+s[a-1]<<1,l[a]=n;for(f=0;f<c;f+=2)0!=(i=e[f+1])&&(e[f]=l[i],l[i]++)},t.H.A=function(e,r,n){for(var a=e.length,f=t.H.m.r,i=0;i<a;i+=2)if(0!=e[i+1])for(var o=i>>1,c=e[i+1],s=o<<4|c,d=r-c,l=e[i]<<d,u=l+(1<<d);l!=u;)n[f[l]>>>15-r]=s,l++},t.H.l=function(e,r){for(var n=t.H.m.r,a=15-r,f=0;f<e.length;f+=2){var i=e[f]<<r-e[f+1];e[f]=n[i]>>>a}},t.H.M=function(e,r,t){t<<=7&r;var n=r>>>3;e[n]|=t,e[n+1]|=t>>>8},t.H.I=function(e,r,t){t<<=7&r;var n=r>>>3;e[n]|=t,e[n+1]|=t>>>8,e[n+2]|=t>>>16},t.H.e=function(e,r,t){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<t)-1},t.H.b=function(e,r,t){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<t)-1},t.H.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},t.H.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},t.H.m=(e=Uint16Array,r=Uint32Array,{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new e(65536),g:new e(32768)}),function(){for(var e=t.H.m,r=0;r<32768;r++){var n=r;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.r[r]=(n>>>16|n<<16)>>>17}function a(e,r,t){for(;0!=r--;)e.push(0,t)}for(r=0;r<32;r++)e.q[r]=e.S[r]<<3|e.T[r],e.c[r]=e.p[r]<<4|e.z[r];a(e._,144,8),a(e._,112,9),a(e._,24,7),a(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),a(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),a(e.Q,19,0),a(e.C,286,0),a(e.D,30,0),a(e.v,320,0)}(),t.H.N),n.decode._readInterlace=function(e,r){for(var t=r.width,a=r.height,f=n.decode._getBPP(r),i=f>>3,o=Math.ceil(t*f/8),c=new Uint8Array(a*o),s=0,d=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],h=0;h<7;){for(var b=u[h],w=v[h],p=0,g=0,_=d[h];_<a;)_+=b,g++;for(var y=l[h];y<t;)y+=w,p++;var A=Math.ceil(p*f/8);n.decode._filterZero(e,r,s,p,g);for(var U=0,H=d[h];H<a;){for(var m=l[h],I=s+U*A<<3;m<t;){var T;if(1==f)T=(T=e[I>>3])>>7-(7&I)&1,c[H*o+(m>>3)]|=T<<7-((7&m)<<0);if(2==f)T=(T=e[I>>3])>>6-(7&I)&3,c[H*o+(m>>2)]|=T<<6-((3&m)<<1);if(4==f)T=(T=e[I>>3])>>4-(7&I)&15,c[H*o+(m>>1)]|=T<<4-((1&m)<<2);if(f>=8)for(var R=H*o+m*i,C=0;C<i;C++)c[R+C]=e[(I>>3)+C];I+=f,m+=w}U++,H+=b}p*g!=0&&(s+=g*(1+A)),h+=1}return c},n.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},n.decode._filterZero=function(e,r,t,a,f){var i=n.decode._getBPP(r),o=Math.ceil(a*i/8),c=n.decode._paeth;i=Math.ceil(i/8);var s=0,d=1,l=e[t],u=0;if(l>1&&(e[t]=[0,0,1][l-2]),3==l)for(u=i;u<o;u++)e[u+1]=e[u+1]+(e[u+1-i]>>>1)&255;for(var v=0;v<f;v++)if(u=0,0==(l=e[(d=(s=t+v*o)+v+1)-1]))for(;u<o;u++)e[s+u]=e[d+u];else if(1==l){for(;u<i;u++)e[s+u]=e[d+u];for(;u<o;u++)e[s+u]=e[d+u]+e[s+u-i]}else if(2==l)for(;u<o;u++)e[s+u]=e[d+u]+e[s+u-o];else if(3==l){for(;u<i;u++)e[s+u]=e[d+u]+(e[s+u-o]>>>1);for(;u<o;u++)e[s+u]=e[d+u]+(e[s+u-o]+e[s+u-i]>>>1)}else{for(;u<i;u++)e[s+u]=e[d+u]+c(0,e[s+u-o],0);for(;u<o;u++)e[s+u]=e[d+u]+c(e[s+u-i],e[s+u-o],e[s+u-i-o])}return e},n.decode._paeth=function(e,r,t){var n=e+r-t,a=n-e,f=n-r,i=n-t;return a*a<=f*f&&a*a<=i*i?e:f*f<=i*i?r:t},n.decode._IHDR=function(e,r,t){var a=n._bin;t.width=a.readUint(e,r),r+=4,t.height=a.readUint(e,r),r+=4,t.depth=e[r],r++,t.ctype=e[r],r++,t.compress=e[r],r++,t.filter=e[r],r++,t.interlace=e[r],r++},n._bin={nextZero:function(e,r){for(;0!=e[r];)r++;return r},readUshort:function(e,r){return e[r]<<8|e[r+1]},writeUshort:function(e,r,t){e[r]=t>>8&255,e[r+1]=255&t},readUint:function(e,r){return 16777216*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3])},writeUint:function(e,r,t){e[r]=t>>24&255,e[r+1]=t>>16&255,e[r+2]=t>>8&255,e[r+3]=255&t},readASCII:function(e,r,t){for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[r+a]);return n},writeASCII:function(e,r,t){for(var n=0;n<t.length;n++)e[r+n]=t.charCodeAt(n)},readBytes:function(e,r,t){for(var n=[],a=0;a<t;a++)n.push(e[r+a]);return n},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,t){for(var a,f="",i=0;i<t;i++)f+="%"+n._bin.pad(e[r+i].toString(16));try{a=decodeURIComponent(f)}catch(a){return n._bin.readASCII(e,r,t)}return a}},n._copyTile=function(e,r,t,n,a,f,i,o,c){for(var s=Math.min(r,a),d=Math.min(t,f),l=0,u=0,v=0;v<d;v++)for(var h=0;h<s;h++)if(i>=0&&o>=0?(l=v*r+h<<2,u=(o+v)*a+i+h<<2):(l=(-o+v)*r-i+h<<2,u=v*a+h<<2),0==c)n[u]=e[l],n[u+1]=e[l+1],n[u+2]=e[l+2],n[u+3]=e[l+3];else if(1==c){var b=e[l+3]*(1/255),w=e[l]*b,p=e[l+1]*b,g=e[l+2]*b,_=n[u+3]*(1/255),y=n[u]*_,A=n[u+1]*_,U=n[u+2]*_,H=1-b,m=b+_*H,I=0==m?0:1/m;n[u+3]=255*m,n[u+0]=(w+y*H)*I,n[u+1]=(p+A*H)*I,n[u+2]=(g+U*H)*I}else if(2==c){b=e[l+3],w=e[l],p=e[l+1],g=e[l+2],_=n[u+3],y=n[u],A=n[u+1],U=n[u+2];b==_&&w==y&&p==A&&g==U?(n[u]=0,n[u+1]=0,n[u+2]=0,n[u+3]=0):(n[u]=w,n[u+1]=p,n[u+2]=g,n[u+3]=b)}else if(3==c){b=e[l+3],w=e[l],p=e[l+1],g=e[l+2],_=n[u+3],y=n[u],A=n[u+1],U=n[u+2];if(b==_&&w==y&&p==A&&g==U)continue;if(b<220&&_>20)return!1}return!0},n.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var t=r,n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;e[r]=t}return e}(),update:function(e,r,t,a){for(var f=0;f<a;f++)e=n.crc.table[255&(e^r[t+f])]^e>>>8;return e},crc:function(e,r,t){return 4294967295^n.crc.update(4294967295,e,r,t)}},n}));
