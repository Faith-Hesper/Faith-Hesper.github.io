define(["exports","./Cartesian3-e96ac170","./Ellipsoid-fa58f06f","./defined-64766648","./GeographicProjection-868b0b16","./Math-56779564","./Matrix2-e52b9454","./Cartesian2-0a34ed75"],(function(t,n,a,e,o,r,s,i){"use strict";const c=Math.cos,g=Math.sin,h=Math.sqrt,u={computePosition:function(t,n,a,o,r,s,i){const u=n.radiiSquared,l=t.nwCorner,C=t.boundingRectangle;let S=l.latitude-t.granYCos*o+r*t.granXSin;const d=c(S),M=g(S),w=u.z*M;let X=l.longitude+o*t.granYSin+r*t.granXCos;const Y=d*c(X),p=d*g(X),m=u.x*Y,f=u.y*p,x=h(m*Y+f*p+w*M);if(s.x=m/x,s.y=f/x,s.z=w/x,a){const n=t.stNwCorner;e.defined(n)?(S=n.latitude-t.stGranYCos*o+r*t.stGranXSin,X=n.longitude+o*t.stGranYSin+r*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(S-t.stSouth)*t.latScalar):(i.x=(X-C.west)*t.lonScalar,i.y=(S-C.south)*t.latScalar)}}},l=new s.Matrix2;let C=new n.Cartesian3;const S=new a.Cartographic;let d=new n.Cartesian3;const M=new o.GeographicProjection;function w(t,a,e,o,r,i,c){const g=Math.cos(a),h=o*g,u=e*g,S=Math.sin(a),w=o*S,X=e*S;C=M.project(t,C),C=n.Cartesian3.subtract(C,d,C);const Y=s.Matrix2.fromRotation(a,l);C=s.Matrix2.multiplyByVector(Y,C,C),C=n.Cartesian3.add(C,d,C),i-=1,c-=1;const p=(t=M.unproject(C,t)).latitude,m=p+i*X,f=p-h*c,x=p-h*c+i*X,G=Math.max(p,m,f,x),R=Math.min(p,m,f,x),y=t.longitude,O=y+i*u,P=y+c*w,W=y+c*w+i*u;return{north:G,south:R,east:Math.max(y,O,P,W),west:Math.min(y,O,P,W),granYCos:h,granYSin:w,granXCos:u,granXSin:X,nwCorner:t}}u.computeOptions=function(t,n,a,e,o,s,c){let g,h=t.east,u=t.west,l=t.north,C=t.south,X=!1,Y=!1;l===r.CesiumMath.PI_OVER_TWO&&(X=!0),C===-r.CesiumMath.PI_OVER_TWO&&(Y=!0);const p=l-C;g=u>h?r.CesiumMath.TWO_PI-u+h:h-u;const m=Math.ceil(g/n)+1,f=Math.ceil(p/n)+1,x=g/(m-1),G=p/(f-1),R=i.Rectangle.northwest(t,s),y=i.Rectangle.center(t,S);0===a&&0===e||(y.longitude<R.longitude&&(y.longitude+=r.CesiumMath.TWO_PI),d=M.project(y,d));const O=G,P=x,W=i.Rectangle.clone(t,o),_={granYCos:O,granYSin:0,granXCos:P,granXSin:0,nwCorner:R,boundingRectangle:W,width:m,height:f,northCap:X,southCap:Y};if(0!==a){const t=w(R,a,x,G,0,m,f);l=t.north,C=t.south,h=t.east,u=t.west,_.granYCos=t.granYCos,_.granYSin=t.granYSin,_.granXCos=t.granXCos,_.granXSin=t.granXSin,W.north=l,W.south=C,W.east=h,W.west=u}if(0!==e){a-=e;const t=i.Rectangle.northwest(W,c),n=w(t,a,x,G,0,m,f);_.stGranYCos=n.granYCos,_.stGranXCos=n.granXCos,_.stGranYSin=n.granYSin,_.stGranXSin=n.granXSin,_.stNwCorner=t,_.stWest=n.west,_.stSouth=n.south}return _};var X=u;t.RectangleGeometryLibrary=X}));
