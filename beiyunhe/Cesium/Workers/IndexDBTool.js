define(["./defer-7878b392"],(function(e){"use strict";return class{static createDB(t,o,r){let n=e.defer(),l=indexedDB.open(t,1);return l.onerror=function(){console.log(t+"数据库创建失败或者异常~"),n.reject()},l.onsuccess=function(e){console.log(t+"数据库连接成功~");let o=e.target.result;n.resolve(o)},l.onupgradeneeded=function(e){e.target.result.createObjectStore(t,{keyPath:o,autoIncrement:r})},n.promise}static getByPkey(t,o,r){console.time(r);let n=e.defer(),l=t.transaction([o]).objectStore(o).get(r);return l.onerror=function(e){n.resolve(null)},l.onsuccess=function(e){console.timeEnd(r),l.result?(n.resolve(l.result),console.log("length: "+l.result.data.byteLength)):n.resolve(null)},n.promise}static getByPkeys(t,o,r,n){let l=t.transaction([o]),s=l.objectStore(o),c=[];for(let e=0;e<r.length;e++){let t=r[e],o=n[e],l=s.get(t);l.onerror=function(e){o.resolve(null)},l.onsuccess=function(e){l.result?o.resolve(l.result):o.resolve(null)},c.push(o.promise)}let u=e.defer();return l.oncomplete=function(){u.resolve(null)},u.promise}static setByKeys(t,o,r){let n=e.defer(),l=t.transaction([o],"readwrite"),s=l.objectStore(o);for(let e=0;e<r.length;e++){let t=r[e];s.put({key:t.url,data:t.data})}return l.oncomplete=function(){n.resolve(null)},n.promise}}}));
