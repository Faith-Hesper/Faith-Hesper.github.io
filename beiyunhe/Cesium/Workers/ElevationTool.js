define(["./defer-7878b392"],(function(e){"use strict";return class{static getDBMap(t,r){let n=e.defer(),o=[];for(let n=0;n<t.length;n++){let l=t[n],s=e.defer(),u=indexedDB.open(l,1);u.onerror=function(){console.log(l+"数据库创建失败或者异常~"),s.reject()},u.onsuccess=function(e){console.log(l+"数据库连接成功~"),r[l]=e.target.result,s.resolve(!0)},u.onupgradeneeded=function(e){let t=e.target.result;r[l]=t,t.createObjectStore(l,{keyPath:"key",autoIncrement:!1}).createIndex("key","key",{unique:!0}),s.resolve(!0)},o.push(s.promise)}return Promise.all(o).then((function(){n.resolve(!0)})),n}static getElevation(t,r,n){let o=e.defer(),l=[],s=[];for(let o=0;o<r.length;o++){let u=r[o],c=t[u].transaction([u]).objectStore(u),i=e.defer(),a=c.get(n);a.onerror=function(e){s[u]=null,i.resolve(null)},a.onsuccess=function(e){a.result?(s[u]=a.result,i.resolve(a.result)):(s[u]=null,i.resolve(null))},l.push(e.defer.promise)}return Promise.all(l).then((function(){o.resolve(s)})),o.promise}static updateElevation(t,r,n,o){let l=e.defer(),s=t.transaction([r],"readwrite").objectStore(r).put({key:n,data:o});return s.onsuccess=function(e){l.resolve(!0)},s.onerror=function(e){l.reject()},l.promise}}}));
