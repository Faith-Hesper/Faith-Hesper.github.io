define(["./Buffer","./VarintReader","./VarintReaderV3","./base64","./ieee754","./isArray","./snappyJs","./CodeTool","./GisTools","./ZstdLoader","./zstd_wasm"],(function(e,t,r,n,s,a,o,i,l,f,u){"use strict";return async function(n,s,a){let o=function(t){for(var r=new e(t.byteLength),n=new Uint8Array(t),s=0;s<r.length;++s)r[s]=n[s];return r}(n),i=null;i=327686==o.readInt32BE(0)?new r(o,4,a):new t(o,4,s),await i._parseVector(o);let l=i.getAllLayerNames(),f={};for(let e=0;e<l.length;e++){let t=l[e];f[t]={features:[],fieldsConfig:a[t]?a[t].fieldsConfig:{},type:1};let r=i.getGeometryType(t),n=await i.getLayerPro(t);if("point"==r.toLowerCase()?f[t].type=1:"line"!=r.toLowerCase()&&"linestring"!=r.toLowerCase()&&"multilinestring"!=r.toLowerCase()||(f[t].type=2),n&&n.length>0)for(let e=0;e<n.length;e++){let s=[];s.push(r),s.push(n[e]),s.push(i.getCoordinatesByIndex(t,e,10)),f[t].features.push(s)}}return f}}));
